<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VisaHorizon | Contact</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;500;600;700;800&family=Chakra+Petch:wght@500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style-contact.css">
  <style>
    /* Styles spécifiques à la page contact */
    .contact-hero {
      padding: 8rem 2rem;
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
    }
    
    .gradient-text {
      background: linear-gradient(90deg, var(--accent), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    .contact-mode-selector {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
    }
    
    .mode-btn {
      background: rgba(0,0,0,0.05);
      border: 1px solid var(--accent);
      color: var(--text);
      padding: 0.8rem 1.5rem;
      border-radius: 4px;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .mode-btn.active {
      background: var(--accent);
      color: var(--light);
    }
    
    .animated-blob {
      position: absolute;
      width: 400px;
      height: 400px;
      background: radial-gradient(circle, var(--accent) 0%, transparent 70%);
      filter: blur(40px);
      opacity: 0.2;
      z-index: -1;
      animation: float 8s ease-in-out infinite;
    }
    
    .smart-features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }
    
    .feature-card {
      background: rgba(0,0,0,0.03);
      padding: 1.5rem;
      border-radius: 8px;
      transition: var(--transition);
      border: 1px solid rgba(0,0,0,0.1);
    }
    
    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    
    .feature-icon {
      font-size: 2rem;
      color: var(--secondary);
      margin-bottom: 1rem;
    }
    
    .smart-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
    }
    
    .option-card {
      background: rgba(0,0,0,0.03);
      border: 1px solid rgba(0,0,0,0.1);
      padding: 1.5rem 1rem;
      text-align: center;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .option-card:hover {
      border-color: var(--accent);
    }
    
    .option-card i {
      font-size: 2rem;
      color: var(--secondary);
      margin-bottom: 0.5rem;
      display: block;
    }
    
    .form-step {
      display: none;
    }
    
    .form-step.active {
      display: block;
      animation: fadeIn 0.5s ease-out;
    }
    
    .form-actions {
      display: flex;
      justify-content: space-between;
      margin-top: 2rem;
    }
    
    /* Chat AI */
    #deepseek-chat-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 320px;
      background: var(--light);
      border: 1px solid var(--accent);
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      z-index: 10000;
      display: none;
      font-family: 'Archivo', sans-serif;
    }
    
    #deepseek-chat-header {
      background: var(--accent);
      color: white;
      padding: 12px 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-top-left-radius: 8px;
      border-top-right-radius: 8px;
    }
    
    #deepseek-chat-messages {
      height: 300px;
      overflow-y: auto;
      padding: 15px;
      background: var(--light);
    }
    
    #deepseek-chat-input {
      display: flex;
      padding: 10px;
      background: var(--primary);
      border-top: 1px solid rgba(0, 0, 0, 0.1);
    }
    
    #deepseek-user-input {
      flex: 1;
      padding: 10px;
      border: 1px solid var(--accent);
      background: rgba(255, 255, 255, 0.9);
      color: var(--dark);
      border-radius: 4px;
      margin-right: 8px;
    }
    
    .deepseek-message {
      background: var(--primary);
      color: var(--text);
      margin-bottom: 12px;
      padding: 8px 12px;
      border-radius: 6px;
      max-width: 85%;
      align-self: flex-start;
    }
    
    .user-message {
      background: var(--accent);
      color: white;
      margin-left: auto;
    }
    
    .form-alert {
      margin-top: 1.5rem;
      padding: 1rem;
      border-radius: 4px;
      display: none;
      animation: fadeIn 0.3s ease-out;
    }
    
    .form-alert.success {
      display: block;
      background-color: rgba(0, 193, 179, 0.2);
      border: 1px solid var(--secondary);
      color: var(--secondary);
    }
    
    .form-alert.error {
      display: block;
      background-color: rgba(255, 94, 91, 0.2);
      border: 1px solid var(--accent);
      color: var(--accent);
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .contact-mode-selector {
        flex-direction: column;
      }
      
      .smart-options {
        grid-template-columns: 1fr;
      }
    }
	
	
	.mode-btn {
  background: transparent;
  border: 2px solid var(--accent);
  color: var(--text);
  padding: 0.8rem 1.5rem;
  border-radius: 30px;
  cursor: pointer;
  transition: var(--transition);
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.mode-btn.active, .mode-btn:hover {
  background: var(--accent);
  color: var(--light);
  border-color: var(--accent);
}

.mode-btn i {
  font-size: 1rem;
}
	
  </style>
</head>
<body>
  <!-- Header -->
  <header id="header">
    <div class="header-container">
      <a href="index.html" class="logo">
        <img src="Logo.png" alt="VisaHorizon Logo" class="logo-img">
        <div class="logo-text">
          <span class="logo-main"></span>
          <span class="logo-tagline">Beyond Borders</span>
        </div>
      </a>
      <nav class="nav-links">
        <a href="index.html" class="nav-link">Accueil</a>
        <a href="services.html" class="nav-link">Services</a>
        <a href="destinations.html" class="nav-link">Destinations</a>
        <a href="process.html" class="nav-link">Processus</a>
        <a href="testimonials.html" class="nav-link">Témoignages</a>
        <a href="contact.html" class="contact-btn">Contact</a>
        <div class="language-selector">
          <button class="language-btn">
            <img src="https://flagcdn.com/w20/fr.png" alt="Français" class="language-flag">
            <span>FR</span>
            <i class="fas fa-chevron-down"></i>
          </button>
          <div class="language-dropdown">
            <a href="contact-en.html" class="language-option">
              <img src="https://flagcdn.com/w20/gb.png" alt="English" class="language-flag">
              <span>EN</span>
            </a>
            <a href="contact.html" class="language-option">
              <img src="https://flagcdn.com/w20/fr.png" alt="Français" class="language-flag">
              <span>FR</span>
            </a>
          </div>
        </div>
      </nav>
    </div>
  </header>
  
   <!-- Menu Mobile -->
      <button class="mobile-menu-btn" aria-label="Menu" aria-expanded="false">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
      <nav class="nav-links">
             <a href="index.html" class="nav-link">Accueil</a>
        <a href="services.html" class="nav-link">Services</a>
        <a href="destinations.html" class="nav-link">Destinations</a>
        <a href="process.html" class="nav-link">Processus</a>
        <a href="testimonials.html" class="nav-link">Témoignages</a>
        <a href="contact.html" class="contact-btn">Contact</a>
        <div class="language-selector">
          <button class="language-btn">
            <img src="https://flagcdn.com/w20/fr.png" alt="Français" class="language-flag">
            <span>FR</span>
            <i class="fas fa-chevron-down"></i>
          </button>
          <div class="language-dropdown">
            <a href="index-en.html" class="language-option">
              <img src="https://flagcdn.com/w20/gb.png" alt="English" class="language-flag">
              <span>EN</span>
            </a>
            <a href="index.html" class="language-option">
              <img src="https://flagcdn.com/w20/fr.png" alt="Français" class="language-flag">
              <span>FR</span>
            </a>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <!-- Section Hero -->
  <section class="contact-hero">
    <div class="hero-content">
      <div class="hero-text">
        <h1 class="hero-title">Contact <span class="gradient-text">Intelligent</span></h1>
        <p class="hero-subtitle">Notre système de contact intelligent adapte le formulaire à vos besoins en temps réel</p>
        
        <div class="contact-mode-selector">
<button class="mode-btn" data-mode="visa"> <!-- anciennement "standard" -->
  <i class="fas fa-envelope"></i> Message standard</button>
<button class="mode-btn" data-mode="urgence">
  <i class="fas fa-bolt"></i> Demande urgente</button>
<button class="mode-btn" data-mode="rdv">
  <i class="fas fa-calendar-check"></i> Prendre rendez-vou</button>
        </div>
      </div>
      <div class="hero-image">
        <div class="animated-blob"></div>
        <img src="https://images.unsplash.com/photo-1579389083078-4e7018379f7e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Contact intelligent" class="hero-img">
        <div class="hero-img-overlay"></div>
      </div>
    </div>
  </section>

  <!-- Formulaire intelligent -->
  <section id="contact" class="contact-section">
    <div class="contact-container">
      <div class="contact-info">
        <h2 class="contact-title"><span class="typed-text"></span></h2>
        <p class="contact-text" id="dynamic-text">Dites-nous comment nous pouvons vous aider et notre système adaptera automatiquement les champs nécessaires.</p>
        
        <div class="smart-features">
          <div class="feature-card ai-trigger">
            <div class="feature-icon">
              <i class="fas fa-robot"></i>
            </div>
            <h4>Assistance IA</h4>
            <p>Notre IA analyse votre demande pour une réponse optimale</p>
          </div>
          
          <div class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-bolt"></i>
            </div>
            <h4>Réponse rapide</h4>
            <p>95% des demandes reçoivent une réponse sous 1h</p>
          </div>
        </div>
      </div>
      
      <div class="contact-form-wrapper">
        <form id="smartForm" action="https://formspree.io/f/mqaqkonw" method="POST" class="contact-form">
          <div class="form-step active" id="step1">
            <div class="form-group">
              <label class="form-label">Quel est l'objet de votre demande ?</label>
              <div class="smart-options">
                <div class="option-card" data-option="visa">
                  <i class="fas fa-passport"></i>
                  <span>Demande de visa</span>
                </div>
                <div class="option-card" data-option="universite">
                  <i class="fas fa-university"></i>
                  <span>Admission universitaire</span>
                </div>
                <div class="option-card" data-option="autre">
                  <i class="fas fa-question"></i>
                  <span>Autre demande</span>
                </div>
              </div>
            </div>
            <button type="button" class="next-btn main-btn">Suivant <i class="fas fa-arrow-right"></i></button>
          </div>
          
          <div class="form-step" id="step2">
            <div id="dynamic-fields"></div>
            <div class="form-actions">
              <button type="button" class="back-btn contact-btn">Retour</button>
              <button type="submit" class="submit-btn">Envoyer <i class="fas fa-paper-plane"></i></button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="footer-container">
      <div class="footer-logo">
        <img src="Logo.png" alt="VisaHorizon" class="footer-logo-img">
        <p class="footer-text">Experts en visas étudiants pour l'Italie, Malte et l'Europe. Nous transformons les rêves académiques en réalités.</p>
        <div class="footer-social">
          <a href="https://www.facebook.com/VisaHorizon.tn/" class="social-link" aria-label="Facebook">
            <i class="fab fa-facebook-f"></i>
            <span class="social-tooltip">Facebook</span>
          </a>
          <a href="https://www.instagram.com/visahorizon.tn/" class="social-link" aria-label="Instagram">
            <i class="fab fa-instagram"></i>
            <span class="social-tooltip">Instagram</span>
          </a>
          <a href="https://www.linkedin.com/in/aymen-lamiri-9baaa926a/" class="social-link" aria-label="LinkedIn">
            <i class="fab fa-linkedin-in"></i>
            <span class="social-tooltip">LinkedIn</span>
          </a>
        </div>
      </div>
      <div class="footer-links">
        <h3>Liens rapides</h3>
        <ul class="footer-nav">
          <li><a href="index.html">Accueil</a></li>
          <li><a href="services.html">Nos services</a></li>
          <li><a href="destinations.html">Destinations</a></li>
          <li><a href="process.html">Processus</a></li>
          <li><a href="testimonials.html">Témoignages</a></li>
        </ul>
      </div>
      
      <div class="footer-links">
        <h3>Destinations</h3>
        <ul class="footer-nav">
          <li><a href="destinations.html#italie">Italie</a></li>
          <li><a href="destinations.html#malte">Malte</a></li>
          <li><a href="destinations.html#france">France</a></li>
          <li><a href="destinations.html#allemagne">Allemagne</a></li>
          <li><a href="destinations.html#canada">Canada</a></li>
        </ul>
      </div>
      
<div class="footer-newsletter">
  <h3>Newsletter</h3>
  <p>Abonnez-vous pour recevoir nos conseils exclusifs et nos offres spéciales.</p>
  <form id="newsletterForm" class="newsletter-form">
    <input type="email" placeholder="Votre email" class="newsletter-input" required>
    <button type="submit" class="newsletter-btn">S'abonner</button>
  </form>
  <div id="newsletterMessage" class="newsletter-message" style="display: none;">
    Désolé, la newsletter est temporairement désactivée. Veuillez revenir plus tard !
  </div>
</div>

    
    <div class="footer-bottom">
      <p class="copyright">© 2025 VisaHorizon. Tous droits réservés.</p>
    </div>
  </footer>

  <!-- Chat AI Container -->
  <div id="deepseek-chat-container">
    <div id="deepseek-chat-header">
      <span>Assistant DeepSeek</span>
      <button id="close-deepseek-chat"><i class="fas fa-times"></i></button>
    </div>
    <div id="deepseek-chat-messages">
      <div class="deepseek-message">Bonjour ! Je suis Aymen Lamiri, comment puis-je vous aider ?</div>
    </div>
    <div id="deepseek-chat-input">
      <input type="text" id="deepseek-user-input" placeholder="Posez votre question...">
      <button id="deepseek-send-btn"><i class="fas fa-paper-plane"></i></button>
    </div>
  </div>

<script>
  // Typing effect
  const typedText = document.querySelector('.typed-text');
  const texts = ["Contactez-nous intelligemment", "Obtenez des réponses rapides", "Système adaptatif"];
  let index = 0;
  let charIndex = 0;
  let isDeleting = false;
  
  function type() {
    const currentText = texts[index];
    
    if (isDeleting) {
      typedText.textContent = currentText.substring(0, charIndex - 1);
      charIndex--;
    } else {
      typedText.textContent = currentText.substring(0, charIndex + 1);
      charIndex++;
    }
    
    if (!isDeleting && charIndex === currentText.length) {
      isDeleting = true;
      setTimeout(type, 2000);
    } else if (isDeleting && charIndex === 0) {
      isDeleting = false;
      index = (index + 1) % texts.length;
      setTimeout(type, 500);
    } else {
      setTimeout(type, isDeleting ? 50 : 100);
    }
  }
  
  // Initialize typing effect
  setTimeout(type, 1000);
  
  // Smart form functionality
  const optionCards = document.querySelectorAll('.option-card');
  const nextBtn = document.querySelector('.next-btn');
  const backBtn = document.querySelector('.back-btn');
  const step1 = document.getElementById('step1');
  const step2 = document.getElementById('step2');
  const dynamicFields = document.getElementById('dynamic-fields');
  const dynamicText = document.getElementById('dynamic-text');
  const modeButtons = document.querySelectorAll('.mode-btn');
  
  let selectedOption = null;
  let selectedMode = 'standard';
  
  // Mode selection
  modeButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      modeButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      selectedMode = btn.dataset.mode;
      
      // Update text based on mode
      switch(selectedMode) {
        case 'urgence':
          dynamicText.textContent = "Pour les demandes urgentes, notre équipe est alertée immédiatement.";
          break;
        case 'rdv':
          dynamicText.textContent = "Sélectionnez un créneau qui vous convient pour un appel vidéo ou physique.";
          break;
        default:
          dynamicText.textContent = "Dites-nous comment nous pouvons vous aider et notre système adaptera automatiquement les champs nécessaires.";
      }
    });
  });
  
  // Navigation vers demande.html avec le mode sélectionné
  modeButtons.forEach(btn => {
    btn.addEventListener('click', function(e) {
      e.preventDefault();
      const selectedMode = this.dataset.mode;
      window.location.href = `demande.html?mode=${selectedMode}`;
    });
  });

  // Option selection
  optionCards.forEach(card => {
    card.addEventListener('click', () => {
      optionCards.forEach(c => c.style.borderColor = 'rgba(0,0,0,0.1)');
      card.style.borderColor = 'var(--accent)';
      selectedOption = card.dataset.option;
    });
  });
  
  // Next button
  nextBtn.addEventListener('click', () => {
    if (!selectedOption) return alert('Veuillez sélectionner une option');
    
    step1.classList.remove('active');
    step2.classList.add('active');
    
    // Generate fields based on selection
    let fieldsHTML = '';
    
    // Common fields
    fieldsHTML += `
      <div class="form-group">
        <label for="name" class="form-label">Nom complet</label>
        <input type="text" id="name" name="name" class="form-input" required>
      </div>
      <div class="form-group">
        <label for="email" class="form-label">Email</label>
        <input type="email" id="email" name="email" class="form-input" required>
      </div>
    `;
    
    // Specific fields
    switch(selectedOption) {
      case 'visa':
        fieldsHTML += `
          <div class="form-group">
            <label for="visa-type" class="form-label">Type de visa</label>
            <select id="visa-type" name="visa_type" class="form-input" required>
              <option value="">Sélectionnez...</option>
              <option value="etudiant">Visa étudiant</option>
              <option value="touriste">Visa touriste</option>
              <option value="travail">Visa travail</option>
            </select>
          </div>
          <div class="form-group">
            <label for="country" class="form-label">Pays de destination</label>
            <input type="text" id="country" name="country" class="form-input" required>
          </div>
        `;
        break;
        
      case 'universite':
        fieldsHTML += `
          <div class="form-group">
            <label for="niveau" class="form-label">Niveau d'études</label>
            <select id="niveau" name="education_level" class="form-input" required>
              <option value="">Sélectionnez...</option>
              <option value="licence">Licence</option>
              <option value="master">Master</option>
              <option value="doctorat">Doctorat</option>
            </select>
          </div>
          <div class="form-group">
            <label for="domaine" class="form-label">Domaine d'études</label>
            <input type="text" id="domaine" name="study_field" class="form-input" required>
          </div>
        `;
        break;
        
      default:
        fieldsHTML += `
          <div class="form-group">
            <label for="message" class="form-label">Votre message</label>
            <textarea id="message" name="message" class="form-input form-textarea" required></textarea>
          </div>
        `;
    }
    
    // Add urgency field if needed
    if (selectedMode === 'urgence') {
      fieldsHTML += `
        <div class="form-group">
          <label for="urgence" class="form-label">Niveau d'urgence</label>
          <select id="urgence" name="urgency" class="form-input" required>
            <option value="normal">Normal</option>
            <option value="eleve">Élevé</option>
            <option value="critique">Critique</option>
          </select>
        </div>
        <input type="hidden" name="_subject" value="[URGENT] Demande de contact">
      `;
    }
    
    // Add calendar if appointment
    if (selectedMode === 'rdv') {
      fieldsHTML += `
        <div class="form-group">
          <label for="rdv-date" class="form-label">Date souhaitée</label>
          <input type="date" id="rdv-date" name="appointment_date" class="form-input" required>
        </div>
        <div class="form-group">
          <label for="rdv-type" class="form-label">Type de rendez-vous</label>
          <select id="rdv-type" name="appointment_type" class="form-input" required>
            <option value="video">Appel vidéo</option>
            <option value="bureau">En agence</option>
          </select>
        </div>
        <input type="hidden" name="_subject" value="Demande de rendez-vous">
      `;
    }
    
    dynamicFields.innerHTML = fieldsHTML;
  });
  
  // Back button
  backBtn.addEventListener('click', () => {
    step2.classList.remove('active');
    step1.classList.add('active');
  });
  
  // Form submission
  document.getElementById('smartForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const form = e.target;
    const submitBtn = form.querySelector('button[type="submit"]');
    const originalText = submitBtn.innerHTML;
    
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Envoi en cours...';
    
    fetch(form.action, {
      method: 'POST',
      body: new FormData(form),
      headers: {
        'Accept': 'application/json'
      }
    })
    .then(response => {
      if (response.ok) {
        alert('Merci ! Votre message a été envoyé avec succès.');
        form.reset();
        step2.classList.remove('active');
        step1.classList.add('active');
        optionCards.forEach(c => c.style.borderColor = 'rgba(0,0,0,0.1)');
      } else {
        throw new Error('Erreur réseau');
      }
    })
    .catch(error => {
      alert('Erreur lors de l\'envoi : ' + error.message);
    })
    .finally(() => {
      submitBtn.disabled = false;
      submitBtn.innerHTML = originalText;
    });
  });
  
  // Chat AI functionality
  document.addEventListener('DOMContentLoaded', function() {
    let conversationHistory = [];
    
    if (localStorage.getItem('chatHistory')) {
      conversationHistory = JSON.parse(localStorage.getItem('chatHistory'));
    } else {
      conversationHistory = [{
        role: "system",
        content: "Vous êtes un assistant expert en visas étudiants. Répondez en français de manière concise et professionnelle."
      }];
    }
    
    // UI Management
    document.querySelector('.ai-trigger')?.addEventListener('click', toggleChat);
    document.getElementById('close-deepseek-chat')?.addEventListener('click', toggleChat);
    document.getElementById('deepseek-send-btn')?.addEventListener('click', sendMessage);
    document.getElementById('deepseek-user-input')?.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendMessage();
    });
    
    function toggleChat() {
      const chat = document.getElementById('deepseek-chat-container');
      chat.style.display = chat.style.display === 'block' ? 'none' : 'block';
    }
    
    async function sendMessage() {
      const input = document.getElementById('deepseek-user-input');
      const message = input.value.trim();
      if (!message) return;
      
      const chatBox = document.getElementById('deepseek-chat-messages');
      
      // Add user message
      conversationHistory.push({ role: "user", content: message });
      displayMessage(message, 'user');
      input.value = '';
      
      // Show typing indicator
      const typingIndicator = document.createElement('div');
      typingIndicator.className = 'deepseek-message typing';
      typingIndicator.innerHTML = `<i class="fas fa-circle-notch fa-spin"></i> L'assistant répond...`;
      chatBox.appendChild(typingIndicator);
      
      try {
        const response = await simulateAIResponse(message);
        
        chatBox.removeChild(typingIndicator);
        displayMessage(response, 'assistant');
        conversationHistory.push({ role: "assistant", content: response });
        localStorage.setItem('chatHistory', JSON.stringify(conversationHistory));
      } catch (error) {
        console.error("Error:", error);
        chatBox.removeChild(typingIndicator);
        displayMessage("Désolé, je ne peux pas répondre pour le moment. Veuillez réessayer plus tard.", 'error');
      }
    }
    
    // Simulated response
    async function simulateAIResponse(message) {
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      const sampleResponses = [
        "Pour les visas étudiants en Italie, vous aurez besoin de...",
        "Le processus pour Malte comprend généralement...",
        "Pouvez-vous préciser votre demande concernant: " + message + "?",
        "Nos experts en visas peuvent vous aider avec cette question. Souhaitez-vous planifier un appel?"
      ];
      
      return sampleResponses[Math.floor(Math.random() * sampleResponses.length)];
    }
    
    function displayMessage(content, type = 'assistant') {
      const chatBox = document.getElementById('deepseek-chat-messages');
      const msg = document.createElement('div');
      msg.className = type === 'user' ? 'user-message' : 'deepseek-message';
      msg.textContent = content;
      chatBox.appendChild(msg);
      chatBox.scrollTop = chatBox.scrollHeight;
    }
  });
  
  // Animation au scroll
  window.addEventListener('scroll', () => {
    const header = document.getElementById('header');
    if (window.scrollY > 50) {
      header.classList.add('scrolled');
    } else {
      header.classList.remove('scrolled');
    }
    
    // Animation des éléments
    const elements = document.querySelectorAll('.service-card, .contact-item, .contact-form');
    elements.forEach(el => {
      const rect = el.getBoundingClientRect();
      if (rect.top < window.innerHeight - 100) {
        el.style.animation = 'fadeIn 0.8s forwards';
      }
    });
  });

  // Newsletter Form Handling
  document.getElementById('newsletterForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const message = document.getElementById('newsletterMessage');
    message.style.display = 'block';
    this.reset();
    
    // Disparaît après 3 secondes
    setTimeout(() => {
      message.style.display = 'none';
    }, 3000);
  });

  // Si un mode est déjà sélectionné dans l'URL, activer le bouton correspondant
  const urlParams = new URLSearchParams(window.location.search);
  const mode = urlParams.get('mode');
  if (mode) {
    document.querySelector(`.mode-btn[data-mode="${mode}"]`).classList.add('active');
  }
</script>
</body>
</html>